{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "React component for the booking page allowing passengers to view trip details and submit booking requests, including handling form input, calculating price, and interacting with APIs.", "external_files": ["../services/api", "../contexts/AuthContext", "../contexts/NotificationContext", "../components/Common/LoadingSpinner"], "external_methods": ["tripAPI.getTripById", "bookingAPI.createBooking", "useAuth", "useNotification", "useParams", "useNavigate", "useTranslation"], "published": ["BookingPage"], "classes": [], "methods": [{"name": "loadTripDetails", "description": "Fetches trip details from API based on tripId param and updates state."}, {"name": "handleInputChange", "description": "Updates bookingData state when form inputs change."}, {"name": "calculateTotal", "description": "Calculates total trip cost including booking fee."}, {"name": "handleBookingSubmit", "description": "Handles form submission to create a booking via API, including success/error handling."}, {"name": "formatTime", "description": "Formats a time string into a human-readable format."}, {"name": "formatDate", "description": "Formats a date string into a localized date."}], "calls": ["tripAPI.getTripById", "bookingAPI.createBooking", "showSuccess", "showError", "navigate", "setTrip", "setLoading", "setBookingLoading", "setError"], "search-terms": ["BookingPage", "tripID", "trip details", "booking form", "React useState", "React useEffect", "React useCallback", "tripAPI", "bookingAPI", "tripSummary", "paymentMethodSelection"], "state": 2, "file_id": 24, "knowledge_revision": 75, "git_revision": "", "revision_history": [{"52": ""}, {"75": ""}], "ctags": [{"_type": "tag", "name": "BookingPage", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^const BookingPage = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "booking", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^      const booking = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "bookingData", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^                        value={bookingData.contactEmail}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "bookingData", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^                        value={bookingData.contactPhone}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "bookingData", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^                      checked={bookingData.paymentMethod === 'cash'}$/", "language": "JavaScript", "kind": "field", "scope": "checked", "scopeKind": "class"}, {"_type": "tag", "name": "bookingData", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^                      checked={bookingData.paymentMethod === 'vipps'}$/", "language": "JavaScript", "kind": "field", "scope": "checked", "scopeKind": "class"}, {"_type": "tag", "name": "bookingData", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^                    value={bookingData.passengerNotes}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "bookingData", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^                    value={bookingData.seats}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "bookingFee", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^    const bookingFee = Math.round(tripCost * 0.05); \\/\\/ 5% booking fee$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "bookingLoading", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^                disabled={bookingLoading || trip.availableSeats < bookingData.seats}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "calculateTotal", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const calculateTotal = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "contactEmail", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^        contactEmail: bookingData.contactEmail,$/", "language": "JavaScript", "kind": "property", "scope": "booking", "scopeKind": "class"}, {"_type": "tag", "name": "contactPhone", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^        contactPhone: bookingData.contactPhone,$/", "language": "JavaScript", "kind": "property", "scope": "booking", "scopeKind": "class"}, {"_type": "tag", "name": "formatDate", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const formatDate = (dateString) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "formatTime", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const formatTime = (timeString) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleBookingSubmit", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const handleBookingSubmit = async (e) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleInputChange", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const handleInputChange = (field, value) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "loadTripDetails", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const loadTripDetails = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "navigate", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const navigate = useNavigate();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^        notes: bookingData.passengerNotes,$/", "language": "JavaScript", "kind": "property", "scope": "booking", "scopeKind": "class"}, {"_type": "tag", "name": "passengerId", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^        passengerId: user.id,$/", "language": "JavaScript", "kind": "property", "scope": "booking", "scopeKind": "class"}, {"_type": "tag", "name": "paymentMethod", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^        paymentMethod: bookingData.paymentMethod,$/", "language": "JavaScript", "kind": "property", "scope": "booking", "scopeKind": "class"}, {"_type": "tag", "name": "pricing", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const pricing = calculateTotal();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "seats", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^        seats: bookingData.seats,$/", "language": "JavaScript", "kind": "property", "scope": "booking", "scopeKind": "class"}, {"_type": "tag", "name": "setBookingData", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const [bookingData, setBookingData] = useState({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setBookingLoading", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const [bookingLoading, setBookingLoading] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setError", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const [error, setError] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const [loading, setLoading] = useState(true);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setTrip", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^  const [trip, setTrip] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "totalAmount", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^        totalAmount: calculateTotal().total$/", "language": "JavaScript", "kind": "property", "scope": "booking", "scopeKind": "class"}, {"_type": "tag", "name": "tripCost", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^    const tripCost = trip.pricePerSeat * bookingData.seats;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "tripId", "path": "/home/kavia/workspace/code-generation/nordic-carpool-platform-89320-89329/blablabil_frontend/src/pages/BookingPage.js", "pattern": "/^        tripId: trip.id,$/", "language": "JavaScript", "kind": "property", "scope": "booking", "scopeKind": "class"}], "hash": "86d505d5d73b74a01a51bfbb982c6b67", "format-version": 4, "code-base-name": "blablabil_frontend", "filename": "blablabil_frontend/src/pages/BookingPage.js", "fields": [{"name": "value={bookingData.contactEmail}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "value={bookingData.contactPhone}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "checked={bookingData.paymentMethod === 'cash'}", "scope": "checked", "scopeKind": "class", "description": "unavailable"}, {"name": "checked={bookingData.paymentMethod === 'vipps'}", "scope": "checked", "scopeKind": "class", "description": "unavailable"}, {"name": "value={bookingData.passengerNotes}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "value={bookingData.seats}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={bookingLoading || trip.availableSeats < bookingData.seats}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "contactEmail: bookingData.contactEmail,", "scope": "booking", "scopeKind": "class", "description": "unavailable"}, {"name": "contactPhone: bookingData.contactPhone,", "scope": "booking", "scopeKind": "class", "description": "unavailable"}, {"name": "notes: bookingData.passengerNotes,", "scope": "booking", "scopeKind": "class", "description": "unavailable"}, {"name": "passengerId: user.id,", "scope": "booking", "scopeKind": "class", "description": "unavailable"}, {"name": "paymentMethod: bookingData.paymentMethod,", "scope": "booking", "scopeKind": "class", "description": "unavailable"}, {"name": "seats: bookingData.seats,", "scope": "booking", "scopeKind": "class", "description": "unavailable"}, {"name": "totalAmount: calculateTotal().total", "scope": "booking", "scopeKind": "class", "description": "unavailable"}, {"name": "tripId: trip.id,", "scope": "booking", "scopeKind": "class", "description": "unavailable"}]}